<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<!--
    Copyright 2010 The myBatis Team

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<!--
    version: $Id$
-->
<book>

    <bookinfo>
        <title>MyBatis EHCache integration - Reference Documentation</title>

        <authorgroup>
            <author>
                <firstname>The MyBatis Community</firstname>
                <affiliation>
                    <orgname>MyBatis.org</orgname>
                </affiliation>
            </author>
        </authorgroup>

        <legalnotice>
            <para>Copies of this document may be made for your own use
                and for
                distribution to others, provided that you do not charge any fee for such
                copies and further provided that each copy contains this Copyright
                Notice, whether distributed in print or electronically.
            </para>
        </legalnotice>
    </bookinfo>

    <chapter>
        <title>The MyBatis EHCache integration</title>
        <section>
            <title>How to</title>
            <para><ulink url="http://ehcache.org/">EHCache</ulink> is a widely used java distributed cache for general purpose caching,
            Java EE and light-weight containers.</para>
            <para>The EHCache integration is built on top of the <literal>ehcache-core</literal> and comes without
            any EHCache 3rd part applications. Please refeer to official EHCache
            <ulink url="http://ehcache.org/documentation/index.html">documentation</ulink> if you need plugins.</para>
            <para>Users that want to use EHCache into their applications, have to download the <?eval ${project.version}?> zip
            <ulink url="http://code.google.com/p/mybatis/downloads/list?q=Product-Cache">bundle</ulink>, decompress it and add the jars in the classpath;
            Apache Maven users instead can simply add in
            the <literal>pom.xml</literal> the following dependency:</para>
            <programlisting language="xml"><![CDATA[<dependencies>
    ...
    <dependency>
        <groupId>]]><?eval ${project.groupId}?><![CDATA[</groupId>
        <artifactId>]]><?eval ${project.artifactId}?><![CDATA[</artifactId>
        <version>]]><?eval ${project.version}?><![CDATA[</version>
    </dependency>
    ...
</dependencies>]]></programlisting>
            <para>then, just configure it in the mapper XML</para>
            <programlisting language="xml"><![CDATA[<mapper namespace="org.acme.FooMapper">

    <cache type="]]><?eval ${project.groupId}?><![CDATA[.ehcache.EhcacheCache"/>

    ...

</mapper>]]></programlisting>
            <para>If users need to log cache operations, they can plug the Cache logging version:</para>
            <programlisting language="xml"><![CDATA[<mapper namespace="org.acme.FooMapper">

    <cache type="]]><?eval ${project.groupId}?><![CDATA[.ehcache.LoggingEhcache"/>

    ...

</mapper>]]></programlisting>
            <para>Users that need to configure EHCache through XML configuration file, have to
  put in the classpath the <literal>/ehcache.xml</literal> resource; please refeer to the
  official EHCache <ulink url="http://ehcache.org/documentation/configuration.html">documentation</ulink>
  to know more details.</para>

            <para>If the <literal>/ehcache.xml</literal> resource is not found or something goes
  wrong while loading it, the default configuration will be used.</para>
        </section>
    </chapter>

</book>
